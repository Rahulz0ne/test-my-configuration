buildscript {
    ext {
        springCloudVersion = '2021.0.3'
    }

}
plugins {
    id 'java-library'
}
apply plugin: 'java'
apply plugin: 'eclipse-wtp'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
archivesBaseName="Bypass-Core"
description = " Inflight Utility Core Services"
//To set the build specific properties from gradle.
processResources {
    filesMatching("**/application.properties") {
        expand version: version
    }
}

def repoCredentials = {
    username = 'developer'
    password = 'read0n1y'
}

repositories {
    mavenCentral()
    mavenLocal()
    maven { url "https://repo.spring.io/milestone" }

}

configurations {
    providedRuntime
    all*.exclude group: 'org.slf4j', module: 'log4j-over-slf4j'
    all*.exclude group: 'org.apache.logging.log4j', module: 'log4j-slf4j-impl'

}

bootJar{
    jar.enabled = true
    bootJar.enabled = false
    rootSpec.exclude("snakeyaml*.jar")    
    rootSpec.exclude("validation-api*.jar")
}

dependencies {
    implementation platform("org.springframework.cloud:spring-cloud-dependencies:$springCloudVersion")
    api('org.springframework:spring-test:5.3.23')
	api('org.springframework.boot:spring-boot-test-autoconfigure:2.7.5')
	api('com.amazonaws:aws-java-sdk-s3:1.12.341')
	api('commons-configuration:commons-configuration:1.10')
	api('org.springframework.cloud:spring-cloud-starter-sleuth:3.1.5')

	//api('org.springframework.boot:spring-boot-starter-validation:2.7.5')
	api('org.springframework.boot:spring-boot-starter-websocket:2.7.5')
    api('org.springframework:spring-context-support:5.3.22')

    api('com.netflix.archaius:archaius-core:0.7.7')
    api('com.netflix.archaius:archaius-aws:0.7.7')

    api(group: 'io.springfox', name: 'springfox-swagger2', version:'2.9.2')
    //api group: 'io.springfox', name: 'springfox-swagger-ui', version:'2.10.0'
    // https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui
     implementation group: 'io.springfox', name: 'springfox-swagger-ui', version: '3.0.0'

    api group: 'com.google.code.simple-spring-memcached', name: 'spring-cache', version: '3.1.0'
    //api group: 'com.google.code.simple-spring-memcached', name: 'xmemcached-provider', version: '3.1.0'
    // https://mvnrepository.com/artifact/com.google.code.simple-spring-memcached/spring-cache
    implementation group: 'com.google.code.simple-spring-memcached', name: 'spring-cache', version: '4.1.3'

    api group: 'com.amazonaws', name: 'elasticache-java-cluster-client', version: '1.1.1'

    api 'redis.clients:jedis:2.9.0'

    api group: 'de.codecentric', name: 'spring-boot-admin-starter-client', version:'2.7.3'

    api("com.netflix.archaius:archaius-core:0.7.3")
    api("com.netflix.archaius:archaius-aws:0.7.3")

    api group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'
    api group: 'org.json', name: 'json', version: '20180130'
    api group: 'com.google.code.gson', name: 'gson', version: '2.9.1'
    api group: 'org.codehaus.jettison', name: 'jettison', version: '1.5.1'

    api('org.apache.commons:commons-lang3:3.12.0')
    api group: 'org.apache.commons', name: 'commons-io', version: '1.3.2'
    api('com.jcabi:jcabi-xml:0.25.4')
   // api("javax.servlet:jstl:1.2")
   // https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl
    implementation group: 'javax.servlet.jsp.jstl', name: 'jstl', version: '1.2'


    api('jakarta.xml.bind:jakarta.xml.bind-api:2.3.3')

    api group: 'joda-time', name: 'joda-time', version: '2.9.4'
    api 'io.jsonwebtoken:jjwt:0.9.1'

    api group: 'io.dropwizard.metrics', name: 'metrics-core', version:'3.1.2' //3.1.2
    api group: 'io.dropwizard.metrics', name: 'metrics-graphite', version:'3.1.2'
    api group: 'io.dropwizard.metrics', name: 'metrics-jvm', version:'3.1.2'

    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat:2.7.5')
    testImplementation('org.springframework.boot:spring-boot-starter-test:2.7.5')

    providedRuntime("org.apache.tomcat.embed:tomcat-embed-jasper:10.1.0")
    //when running locally, comment out the providedRuntime above, and uncomment the compile below.
    api("org.apache.tomcat.embed:tomcat-embed-jasper:10.1.0")
    api('org.apache.tomcat.embed:tomcat-embed-core:10.1.1')

    api('net.sf.uadetector:uadetector-core:0.9.22')
    api('net.sf.uadetector:uadetector-resources:2014.10')
    api('net.sf.uadetector:uadetector-json:0.1.22')
    api('net.sf.qualitycheck:quality-check:1.1')
    api group: 'commons-collections', name: 'commons-collections', version: '3.2.2'
    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.14.0'
    // https://mvnrepository.com/artifact/com.google.guava/guava
    implementation group: 'com.google.guava', name: 'guava', version: '31.1-jre'
    //implementation ("org.yaml:snakeyaml@1.32!!")
    api('org.springframework.boot:spring-boot-starter-validation:2.7.5'){
   exclude group: 'org.yaml.snakeyml', module: '1.31'
   }
   // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core
 implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.7.7'


}
/*
dependencyManagement {
	imports {
		mavenBom "org.springframework.cloud:spring-cloud-dependencies:Dalston.RC1"
	}
}*/

dependencyManagement {
    imports {
        mavenBom "org.springframework.cloud:spring-cloud-dependencies:2021.0.4"
        mavenBom 'org.springframework.cloud:spring-cloud-sleuth:3.1.4'
    }
}
